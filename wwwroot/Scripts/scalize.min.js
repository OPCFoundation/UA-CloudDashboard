(function(n){"use strict";var i={width:0,height:0,selector:".item-point",styleSelector:"circle",animationSelector:"",animationPopoverIn:"",animationPopoverOut:"",onInit:null,getSelectorElement:null,getValueRemove:null},t={settings:null,init:function(r,u){this.settings=n.extend(i,u);this.event(r);t.layout(r);n(window).on("load",function(){t.layout(r)});n(r).find(".target").on("load",function(){t.layout(r)});n(window).on("resize",function(){setTimeout(function(){t.layout(r)},20)})},event:function(i){this.settings.styleSelector&&n(this.settings.selector).addClass(this.settings.styleSelector);this.settings.animationSelector&&(this.settings.animationSelector=="marker"?(n(this.settings.selector).addClass(this.settings.animationSelector),n(this.settings.selector).append('<div class="pin"><\/div>'),n(this.settings.selector).append('<div class="pulse"><\/div>')):n(this.settings.selector).addClass(this.settings.animationSelector));n.isFunction(this.settings.onInit)&&this.settings.onInit();n(i).find(".content").addClass("animated");n(this.settings.selector).wrapAll("<div class='wrap-selector' />");n(this.settings.selector).each(function(){n(".toggle",this).on("click",function(r){r.preventDefault();n(this).closest(t.settings.selector).toggleClass("active");var f=n(this).closest(t.settings.selector).data("popover"),u=n(f);n(this).closest(t.settings.selector).hasClass("active")&&!n(this).closest(t.settings.selector).hasClass("disabled")?(n.isFunction(t.settings.getSelectorElement)&&t.settings.getSelectorElement(n(this).closest(t.settings.selector)),u.fadeIn(),t.layout(i),u.removeClass(t.settings.animationPopoverOut),u.addClass(t.settings.animationPopoverIn)):(n.isFunction(t.settings.getValueRemove)&&t.settings.getValueRemove(n(this).closest(t.settings.selector)),u.removeClass(t.settings.animationPopoverIn),u.addClass(t.settings.animationPopoverOut),u.delay(500).fadeOut())});n(".select",this).on("click",function(){});n(".select",this).on("mouseover",function(){n(this).closest(t.settings.selector).css("opacity",.7)});n(".select",this).on("mouseout",function(){n(this).closest(t.settings.selector).css("opacity",1)});var u=n(this).data("popover"),r=n(u);r.find(".exit").on("click",function(i){i.preventDefault();n('[data-popover="'+u+'"]').removeClass("active");r.removeClass(t.settings.animationPopoverIn);r.addClass(t.settings.animationPopoverOut);r.delay(500).fadeOut()})})},layout:function(t){var i=new Image;i.src=t.find(".target").attr("src");var r=i.naturalWidth,u=i.naturalHeight,f=n(t).width(),e=n(t).height(),o=e/u*100,s=f/r*100;n(this.settings.selector).each(function(){var i=n(this).data("top")*o/100,f=n(this).data("left")*s/100,t,e,r,u,h,c;n(this).css("top",i+"px");n(this).css("left",f+"px");t=n(this).data("popover");e=n(t).find(".head").outerHeight()+n(t).find(".body").outerHeight()+n(t).find(".footer").outerHeight();n(t).css("left",f+"px");n(t).css("height",e+"px");n(t).hasClass("bottom")?(r=n(t).outerHeight(),u=i-r,n(t).css("top",u+"px")):n(t).hasClass("center")?(r=n(t).outerHeight()*.5,u=i-r,n(t).css("top",u+"px")):n(t).css("top",i+"px");n(".select",this).css("width",n(this).outerWidth());n(".select",this).css("height",n(this).outerHeight());n(".toggle",this).css("width",n(this).outerWidth());n(".toggle",this).css("height",n(this).outerHeight());n(this).find(".pin")&&(h=n(".pin",this).outerWidth(),c=n(".pin",this).outerHeight(),n(".toggle",this).css("width",h),n(".toggle",this).css("height",c))})}};n.fn.scalize=function(n){return t.init(this,n)}})(jQuery);